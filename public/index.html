<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>é¢œå€¼æ‰“åˆ†æœº ğŸ˜»</title>
    <style>
      body { font-family: sans-serif; text-align: center; margin-top: 50px; }
      input, button { margin: 10px; }
      #result { margin-top: 20px; font-size: 20px; font-weight: bold; }
    </style>
  </head>
  <body>
    <h1>é¢œå€¼æ‰“åˆ†æœº ğŸš€</h1>
    <p>ä¸Šä¼ ä¸€å¼ ç…§ç‰‡ï¼Œè®© AI ç»™ä½ æ‰“ä¸ªåˆ†å§ï½</p>
    <input type="file" id="fileInput" accept="image/*" />
    <br />
    <button id="submitBtn">å¼€å§‹è¯„åˆ†</button>
    <div id="result"></div>

    <script>
      document.getElementById("submitBtn").onclick = async function () {
        const fileInput = document.getElementById("fileInput");
        if (!fileInput.files.length) {
          alert("å–µï½å…ˆé€‰å¼ ç…§ç‰‡å•¦ï¼");
          return;
        }
        const file = fileInput.files[0];
        const reader = new FileReader();
        reader.onload = async function () {
          const base64 = reader.result.split(",")[1];
          document.getElementById("result").innerText = "è¯„åˆ†ä¸­ï¼Œå–µå‘œ...";
          const res = await fetch("/api/score", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ image: base64 }),
          });
          const data = await res.json();
          if (data.score) {
            let msg = `é¢œå€¼åˆ†æ•°ï¼š${data.score} / 100 ğŸ˜`;
            if (data.score >= 85) {
              msg += " ğŸŒŸğŸŒŸ OMGï¼ä½ ç®€ç›´å¸…ï¼ˆç¾ï¼‰ç‚¸äº†ï¼";
            } else if (data.score >= 70) {
              msg += " âœ¨ ä¸é”™å“¦ï¼Œç¨³ç¨³çš„é­…åŠ›ï¼";
            } else {
              msg += " ğŸ± æ²¡å…³ç³»ï¼Œæ°”è´¨æ‰æ˜¯æœ€é‡è¦çš„é¸­ï½";
            }
            document.getElementById("result").innerText = msg;
          } else {
            document.getElementById("result").innerText = "æ£€æµ‹å¤±è´¥ï¼Œå–µå‘œï½è¯•è¯•åˆ«çš„ç…§ç‰‡ï¼Ÿ";
          }
        };
        reader.readAsDataURL(file);
      };
    </script>
  </body>
</html>
